# Gemini MCP Server\n\nMCP server for Gemini image generation optimized for free tier usage.\n\n## Features\n\n- 🎨 **Image Generation**: Generate images from text prompts using Google's Gemini API\n- 🚀 **Free Tier Optimized**: Built specifically for free tier rate limits and quotas\n- ⚡ **Async Queue Management**: Handles multiple requests with intelligent queuing\n- 🛡️ **Robust Error Handling**: Comprehensive retry logic and error management\n- 📊 **History Tracking**: Save and manage your generation history with metadata\n- 🔧 **Configurable Parameters**: Customize aspect ratios, styles, and safety settings\n\n## Quick Start\n\n### Prerequisites\n\n- Python 3.10 or higher\n- Google AI API key (get one [here](https://makersuite.google.com/app/apikey))\n\n### Installation\n\n```bash\n# Clone the repository\ngit clone https://github.com/RouHim/gemini-mcp-server.git\ncd gemini-mcp-server\n\n# Install dependencies\npip install -e .\n\n# Copy environment template and add your API key\ncp .env.example .env\n# Edit .env and add your GOOGLE_API_KEY\n```\n\n### Configuration\n\nCopy `.env.example` to `.env` and configure:\n\n```bash\nGOOGLE_API_KEY=your_gemini_api_key_here\n```\n\n### Usage\n\n```bash\n# Start the MCP server\ngemini-mcp-server\n```\n\n## MCP Tools\n\n### `generate_image`\nGenerate an image from a text prompt.\n\n**Parameters:**\n- `prompt` (string, required): Text description of the image to generate\n- `aspect_ratio` (string, optional): Image aspect ratio (1:1, 16:9, 9:16, 4:3)\n- `style` (string, optional): Artistic style (photographic, artistic, sketch, digital-art)\n- `safety_level` (string, optional): Content filtering level (strict, moderate, permissive)\n\n### `get_history`\nRetrieve image generation history.\n\n**Parameters:**\n- `limit` (number, optional): Maximum number of entries to return\n- `search` (string, optional): Search term to filter prompts\n\n### `cleanup_storage`\nManually clean up old generated images.\n\n**Parameters:**\n- `max_age_days` (number, optional): Remove images older than specified days\n- `max_count` (number, optional): Keep only the most recent N images\n\n## Free Tier Optimization\n\nThis server is specifically designed for Google's free tier:\n\n- **Rate Limiting**: Respects 15 requests per minute limit\n- **Queue Management**: Automatically queues requests during high usage\n- **Error Handling**: Graceful handling of quota exceeded errors\n- **Smart Retry**: Exponential backoff for rate limit errors\n- **Resource Management**: Configurable local storage limits\n\n## Development\n\n### Setup Development Environment\n\n```bash\n# Install development dependencies\npip install -r requirements-dev.txt\n\n# Run tests\npytest\n\n# Code formatting\nblack .\n\n# Linting\nruff check .\n\n# Type checking\nmypy src/\n```\n\n### Project Structure\n\n```\nsrc/\n└── gemini_mcp_server/\n    ├── __init__.py\n    ├── server.py          # Main MCP server\n    ├── gemini_client.py   # Gemini API wrapper\n    ├── rate_limiter.py    # Free tier rate limiting\n    ├── queue_manager.py   # Request queue management\n    ├── tools/\n    │   ├── __init__.py\n    │   ├── generate_image.py\n    │   ├── list_history.py\n    │   └── configure_settings.py\n    └── utils/\n        ├── __init__.py\n        ├── validators.py\n        ├── storage.py\n        └── metadata.py\n```\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit your changes (`git commit -m 'feat: add amazing feature'`)\n4. Push to the branch (`git push origin feature/amazing-feature`)\n5. Open a Pull Request\n\n## License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## Security\n\n- Never commit your API key to the repository\n- Use environment variables for all sensitive configuration\n- The `.env` file is ignored by git for security\n\n## Roadmap\n\n- [x] Basic image generation\n- [ ] Advanced parameter configuration\n- [ ] Queue management system\n- [ ] Comprehensive error handling\n- [ ] History and metadata tracking\n- [ ] Web interface (future consideration)\n- [ ] Image editing capabilities (future consideration)\n\n## Support\n\nIf you encounter any issues or have questions:\n\n1. Check the [Issues](https://github.com/RouHim/gemini-mcp-server/issues) page\n2. Create a new issue with detailed information\n3. For general questions, use the [Discussions](https://github.com/RouHim/gemini-mcp-server/discussions) tab\n